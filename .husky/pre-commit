echo "ğŸ” Checking pre-commit requirements..."

echo "ğŸ§¹ Running lint-staged checks..."
# Run lint-staged and store exit code
yarn lint-staged
LINT_RESULT=$?

if [ $LINT_RESULT -ne 0 ]; then
  echo "âŒ Pre-commit checks failed, please address linting issues"
  exit 1
fi

# Prettier Check
echo "ğŸ§¹ Running prettier checks..."
yarn prettier:check
PRETTIER_RESULT=$?

if [ $PRETTIER_RESULT -ne 0 ]; then
  echo "âŒ Pre-commit checks failed, run: yarn prettier:write"
  exit 1
fi

# Run tests
echo "ğŸ§ª Running tests..."
yarn test:changed
TEST_RESULT=$?

if [ $TEST_RESULT -ne 0 ]; then
  echo "âŒ Pre-commit checks failed, please check failing tests!"
  exit 1
fi

echo "âœ… Pre-commit checks passed"